{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Spinner.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/OpenRoutePage.js","components/Register.js","components/Login.js","components/ProtectedRoute.js","utils/authorisation.js","images/registred-icon.svg","images/nonregistred-icon.svg","components/RegistrationPopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","useState","topMenuHeadden","setTopMenuHeadden","openTopMenu","className","email","onClick","headerButton","src","logo","alt","CurrentUserContext","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","onCardClick","id","type","link","name","onCardDelete","onCardLike","length","Spinner","Main","avatar","onEditAvatar","onEditProfile","about","onAddPlace","isLoading","cards","map","currentCard","Footer","PopupWithForm","isOpen","onSubmit","title","children","value","inputValue","onClose","ImagePopup","api","config","this","_url","url","_headers","headers","currentPromise","then","response","ok","json","Promise","reject","status","_contactTheServer","fetch","method","newUserInfo","body","JSON","stringify","newCardInfo","cardId","cardID","isNotLiked","EditProfilePopup","setName","description","setDescription","useEffect","event","preventDefault","onUpdateUser","onChange","target","required","minLength","maxLength","placeholder","EditAvatarPopup","avatarURL","useRef","onUpdateAvatar","current","ref","AddPlacePopup","cardName","setCardName","cardLink","setCardLink","OpenRoutePage","password","Register","userData","setUserData","onRegister","to","Login","onLogin","ProtectedRoute","Component","component","loggedIn","BASE_URL","checkResponse","statusText","RegistrationPopup","openedWithError","nonSuccessRegistrationLogo","successRegistrationLogo","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","registrationPopup","setRegistrationPopup","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoading","setLoggedIn","userEmail","setUserEmail","history","useHistory","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","push","getUserEmail","token","authorisation","data","catch","error","console","log","all","getUserInformation","getCards","userInformation","cardsFromServer","localStorage","getItem","tokenCheck","Provider","removeItem","exact","path","putLike","newCard","state","c","deleteCardFromServer","result","newCards","filter","setItem","editProfile","newUserInformation","updateAvatar","addNewCardToServer","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.48b492d0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import { useState } from 'react';\nimport logo from '../images/logo.svg';\n\nfunction Header(props) {\n  const [topMenuHeadden, setTopMenuHeadden] = useState('true');\n\n  function openTopMenu() {\n    setTopMenuHeadden(!topMenuHeadden);\n  }\n\n\n  return (\n    <div>\n      <section className={`header__menu-top ${topMenuHeadden && `header__menu-top_headden`}`}>\n          <p className='header__text'>{props.email}</p>\n          <button className='header__button' onClick={props.onClick}>{props.headerButton}</button>\n      </section>\n      <header className=\"header page__content\">\n        <img src={logo} alt=\"Логотип страницы\" className=\"header__logo\" />\n        <button onClick={openTopMenu} className={`header__mobile-menu ${!topMenuHeadden && `header__menu-top_headden`}`}></button>\n        <button onClick={openTopMenu} className={`header__close-menu ${topMenuHeadden && `header__menu-top_headden`}`}></button>\n        <div className='header__menu'>\n          <p className='header__text'>{props.email}</p>\n          <button className='header__button' onClick={props.onClick}>{props.headerButton}</button>\n        </div>\n      </header>\n    </div>\n  )\n}\n\nexport default Header;\n","import { createContext } from \"react\";\n\nexport const CurrentUserContext = createContext();\n","import { useContext } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n  const currentUser = useContext(CurrentUserContext);\n  const isOwn = props.card.owner._id === currentUser._id;\n  const cardDeleteButtonClassName = (\n    `element-template__trash ${!isOwn ? 'element-template__trash_disabled' : ''}`\n  );\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = (\n    `element-template__like ${isLiked ? 'element-template__like_active' : ''}`\n  );\n\n  function handleClick() {\n    props.onCardClick(props.card)\n  }\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n  function handleDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <div className=\"element-template__element\">\n      <button onClick={handleClick} className=\"popup-open element-template__open\" id=\"open-card\" type=\"button\"><img className=\"element-template__picture\" src={props.card.link} alt={props.card.name} /></button>\n      <button onClick={handleDeleteClick} className={cardDeleteButtonClassName} type=\"button\"></button>\n      <div className=\"element-template__group\">\n        <h2 className=\"element-template__title\">{props.card.name}</h2>\n        <button onClick={handleLikeClick} className={cardLikeButtonClassName} type=\"button\"></button>\n        <p className=\"element-template__like-count\">{props.card.likes.length}</p>\n      </div>\n    </div>\n  )\n}\n\nexport default Card;\n","function Spinner() {\n  return(\n    <div className=\"spinner\"></div>\n  )\n}\n\nexport default Spinner;\n","import { useContext } from 'react';\nimport Card from './Card';\nimport Spinner from './Spinner';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main(props) {\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <main className='content'>\n      <section className=\"profile page__content\">\n        <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар пользователя\" />\n        <button type=\"button\" onClick={props.onEditAvatar} className=\"profile__avatar-overlay\"></button>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <button type=\"button\" onClick={props.onEditProfile} className=\"popup-open profile__edit-button\"></button>\n          <p className=\"profile__description\">{currentUser.about}</p>\n        </div>\n        <button type=\"button\" onClick={props.onAddPlace} className=\"popup-open profile__add-button\"></button>\n      </section>\n      <section className=\"elements page__content\">\n      {(props.isLoading)\n          ? (<Spinner />)\n          : (props.cards).map(currentCard => {\n            return (<Card\n              onCardDelete={props.onCardDelete}\n              onCardLike={props.onCardLike}\n              onCardClick={props.onCardClick}\n              key={currentCard._id}\n              card={currentCard} />)\n          })}\n      </section>\n    </main>\n  )\n}\n\nexport default Main;\n","function Footer() {\n  return (\n    <footer className=\"footer page__content\">\n      <p className=\"footer__text\">&#169; 2021 Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","function PopupWithForm(props) {\n  return (\n    <section className={`popup popup_type_${props.name} ${props.isOpen && `popup_opened`}`} id={`popup-${props.name}`}>\n      <form onSubmit={props.onSubmit} className=\"popup__container\" name={`popup-form-${props.name}`} id={`form-${props.name}`}>\n        <h2 className=\"popup__title\">{props.title}</h2>\n        {props.children}\n        <input type=\"submit\" className=\"popup__submit\" value={props.inputValue} name=\"popup-submit\" />\n        <button onClick={props.onClose} className=\"popup__close\" id={`close-${props.name}`} type=\"button\"></button>\n      </form>\n    </section>\n  )\n}\n\nexport default PopupWithForm;\n","function ImagePopup(props) {\n  return (\n    <section className={`popup popup-view-card ${(props.card.link !== '') && `popup_opened`}`} id=\"popup-view-card\">\n      <div className=\"popup__open-card\">\n        <figure className=\"popup__picture\">\n          <img className=\"popup__image\" src={props.card.link} alt={props.card.name} />\n          <figcaption className=\"popup__caption\">{props.card.name}</figcaption>\n        </figure>\n        <button onClick={props.onClose} className=\"popup__close\" id=\"close-card\" type=\"button\"></button>\n      </div>\n    </section>\n  )\n}\n\nexport default ImagePopup;\n","class Api {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n\n  _contactTheServer(currentPromise) {\n    return currentPromise\n      .then(response => {\n        if (!response.ok) {\n          return Promise.reject(`Ошибка ${response.status}`);\n        }\n        return response.json();\n      })\n  }\n\n  getUserInformation() {\n    return this._contactTheServer(fetch(`${this._url}/users/me`, {\n      headers: this._headers,\n      method: 'GET',\n    }));\n  }\n\n  getCards() {\n    return this._contactTheServer(fetch(`${this._url}/cards`, {\n      headers: this._headers,\n      method: 'GET',\n    }));\n  }\n\n  editProfile(newUserInfo) {\n    return this._contactTheServer(fetch(`${this._url}/users/me`, {\n      headers: this._headers,\n      method: 'PATCH',\n      body: JSON.stringify(newUserInfo),\n    }));\n  }\n\n  addNewCardToServer(newCardInfo) {\n    return this._contactTheServer(fetch(`${this._url}/cards`, {\n      headers: this._headers,\n      method: 'POST',\n      body: JSON.stringify(newCardInfo)\n    }));\n  }\n\n  deleteCardFromServer(cardId) {\n    return this._contactTheServer(fetch(`${this._url}/cards/${cardId}`, {\n      headers: this._headers,\n      method: 'DELETE',\n    }));\n  }\n\n  putLike(cardID, isNotLiked) {\n    return this._contactTheServer(fetch(`${this._url}/cards/likes/${cardID}`, {\n      headers: this._headers,\n      method: isNotLiked ? 'PUT': 'DELETE',\n    }));\n  }\n\n  updateAvatar(avatar) {\n    return this._contactTheServer(fetch(`${this._url}/users/me/avatar`, {\n      headers: this._headers,\n      method: 'PATCH',\n      body: JSON.stringify(avatar)\n    }));\n  }\n}\n\nconst api = new Api({\n  url: 'https://nomoreparties.co/v1/cohort-27',\n  headers: {\n    'authorization': '49889f34-1928-497a-a94e-146b8fe6d002',\n    'Content-Type': 'application/json',\n  },\n});\n\nexport default api;\n","import { useContext, useState, useEffect } from \"react\";\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup(props) {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const currentUser = useContext(CurrentUserContext);\n\n  function handleChangeName(event) {\n    setName(event.target.value);\n  }\n  function handleChangeDescription(event) {\n    setDescription(event.target.value);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description\n    });\n  }\n\n  useEffect(() => {\n    if (props.isOpen) {\n      setName(currentUser.name);\n      setDescription(currentUser.about);\n    }\n  }, [currentUser, props.isOpen]);\n\n  return (\n    <PopupWithForm onSubmit={handleSubmit} name='edit-author' title='Редактировать профиль' isOpen={props.isOpen} onClose={props.onClose} inputValue=\"Сохранить\">\n      <section className=\"popup__section\">\n        <input onChange={handleChangeName} type=\"text\" className=\"popup__field\" name=\"author-name\" id=\"name\" required minLength=\"2\" maxLength=\"40\" placeholder=\"Имя\" value={name} />\n        <span className=\"popup__error name-error\"></span>\n      </section>\n      <section className=\"popup__section\">\n        <input onChange={handleChangeDescription} type=\"text\" className=\"popup__field\" name=\"author-description\" id=\"description\" required minLength=\"2\" maxLength=\"200\" placeholder=\"Занятие\" value={description} />\n        <span className=\"popup__error description-error\"></span>\n      </section>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;\n","import { useRef } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n  const avatarURL = useRef();\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    props.onUpdateAvatar({\n      avatar: avatarURL.current.value,\n    });\n  }\n\n  return (\n    <PopupWithForm onSubmit={handleSubmit} name='new-avatar' title='Обновить аватар' isOpen={props.isOpen} onClose={props.onClose} inputValue=\"Создать\">\n      <section className=\"popup__section\">\n        <input ref={avatarURL} type=\"url\" className=\"popup__field\" name=\"avatar\" id=\"avatar\" placeholder=\"Ссылка на аватар\" required />\n        <span className=\"popup__error link-error\"></span>\n      </section>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n","import { useState, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup(props) {\n  const [cardName, setCardName] = useState('');\n  const [cardLink, setCardLink] = useState('');\n\n  function handleAddPlaceSubmit(event) {\n    event.preventDefault();\n    props.onAddPlace({\n      name: cardName,\n      link: cardLink\n    });\n  }\n  function handleChangeName(event) {\n    setCardName(event.target.value);\n  }\n  function handleChangeLink(event) {\n    setCardLink(event.target.value);\n  }\n\n  useEffect(() => {\n    if (props.isOpen) {\n      setCardName('');\n      setCardLink('');\n    }\n  }, [props.isOpen]);\n\n  return (\n    <PopupWithForm onSubmit={handleAddPlaceSubmit} name='add-card' title='Новое место' isOpen={props.isOpen} onClose={props.onClose} inputValue=\"Создать\">\n      <section className=\"popup__section\">\n        <input value={cardName} onChange={handleChangeName} type=\"text\" className=\"popup__field\" name=\"card-place\" id=\"place\" placeholder=\"Название\" required minLength=\"2\" maxLength=\"30\" />\n        <span className=\"popup__error place-error\"></span>\n      </section>\n      <section className=\"popup__section\">\n        <input value={cardLink} onChange={handleChangeLink} type=\"url\" className=\"popup__field\" name=\"card-link\" id=\"link\" placeholder=\"Ссылка на картинку\" required />\n        <span className=\"popup__error link-error\"></span>\n      </section>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;\n","function OpenRoutePage(props) {\n  return(\n    <section className='open-route-page__content'>\n      <form onSubmit={props.onSubmit} className='open-route-page__form' name={props.name}>\n        <h2 className='open-route-page__title'>{props.title}</h2>\n        <section className='open-route-page__form-section'>\n          <input onChange={props.onChange} type='email' className='open-route-page__form-field' name='email' required minLength='5' placeholder='Email' value={props.email} />\n        </section>\n        <section className='open-route-page__form-section'>\n          <input onChange={props.onChange} type='password' className='open-route-page__form-field' name='password' required minLength='5' placeholder='Пароль' value={props.password} />\n        </section>\n        <input type='submit' className='open-route-page__form-submit' value={props.inputValue} name={`submit-${props.name}`} />\n      </form>\n      {props.children}\n    </section>\n  )\n}\n\nexport default OpenRoutePage;\n","import { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport OpenRoutePage from \"./OpenRoutePage\";\n\nfunction Register(props) {\n  const [userData, setUserData] = useState({ email: '', password: '' });\n\n  function handleChange(event) {\n    const { name, value } = event.target;\n    setUserData({\n      ...userData,\n      [name]: value\n    });\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    setUserData({\n      email: '',\n      password: ''\n    })\n    props.onRegister(userData);\n  }\n\n  return (\n    <OpenRoutePage email={userData.email} password={userData.password} onSubmit={handleSubmit} onChange={handleChange} title='Регистрация' inputValue='Зарегистрироваться' name='registration'>\n      <section className='open-route-page__login-propose'>\n        <p className='open-route-page__login-propose-caption'>\n          Уже зарегистрированы? <Link className='open-route-page__login-propose-caption' to='/sign-in'>Войти</Link>\n        </p>\n      </section>\n    </OpenRoutePage>\n  )\n}\n\nexport default Register;\n","import { useState } from \"react\";\nimport OpenRoutePage from \"./OpenRoutePage\";\n\nfunction Login(props) {\n  const [userData, setUserData] = useState({ email: '', password: '' });\n\n  function handleChange(event) {\n    const { name, value } = event.target;\n    setUserData({\n      ...userData,\n      [name]: value\n    });\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    if (!userData.email || !userData.password) {\n      return;\n    }\n    setUserData({\n      email: '',\n      password: ''\n    })\n    props.onLogin(userData);\n  }\n\n  return(\n    <OpenRoutePage email={userData.email} password={userData.password} onSubmit={handleSubmit} onChange={handleChange} title='Вход' inputValue='Войти' name='login' />\n  )\n}\n\nexport default Login;\n","import { Redirect, Route } from \"react-router\";\n\nfunction ProtectedRoute({ component: Component, ...props }) {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to='/sign-in' />\n      }\n    </Route>\n  )\n}\n\nexport default ProtectedRoute;\n","const BASE_URL = 'https://auth.nomoreparties.co';\n\nfunction checkResponse(response) {\n  return response.ok ? response.json() : Promise.reject(`Ошибка: ${response.statusText}`)\n}\n\nfunction register(userData) {\n  return (\n    fetch(`${BASE_URL}/signup`, {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    })\n      .then(response => {\n        return checkResponse(response)\n      })\n  )\n}\n\nfunction authorize(userData) {\n  return (\n    fetch(`${BASE_URL}/signin`, {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    })\n      .then(response => {\n        return checkResponse(response)\n      })\n  )\n}\n\nfunction getEmail(token) {\n  return (\n    fetch(`${BASE_URL}/users/me`, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      },\n    })\n      .then(response => {\n        return checkResponse(response)\n      })\n  )\n}\n\nexport { BASE_URL, register, authorize, getEmail };\n","export default __webpack_public_path__ + \"static/media/registred-icon.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/nonregistred-icon.df8eddf6.svg\";","import successRegistrationLogo from '../images/registred-icon.svg';\nimport nonSuccessRegistrationLogo from '../images/nonregistred-icon.svg';\n\nfunction RegistrationPopup(props) {\n  const successRegistrationText = 'Вы успешно зарегистрировались!';\n  const nonSuccessRegistrationText = 'Что-то пошло не так! Попробуйте еще раз.'\n  return (\n    <section className={`popup ${props.isOpen && `popup_opened`}`}>\n      <div className=\"popup__container\">\n        <img className='popup__registration-icon' alt='Иконка результата регистрации' src={props.openedWithError ? nonSuccessRegistrationLogo : successRegistrationLogo} />\n        <p className=\"popup__title popup__registration-text\">{props.openedWithError ? nonSuccessRegistrationText : successRegistrationText}</p>\n        <button onClick={props.onClose} className=\"popup__close\" type=\"button\"></button>\n      </div>\n    </section>\n  )\n}\n\nexport default RegistrationPopup;\n","import Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport { useState, useEffect } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport api from '../utils/api';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport Register from './Register';\nimport { Redirect, Route, Switch, useHistory } from 'react-router';\nimport Login from './Login';\nimport ProtectedRoute from './ProtectedRoute';\nimport * as authorisation from '../utils/authorisation';\nimport RegistrationPopup from './RegistrationPopup';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [registrationPopup, setRegistrationPopup] = useState({ isOpen: false, openedWithError: false });\n  const [selectedCard, setSelectedCard] = useState({ name: '', link: '' });\n  const [currentUser, setCurrentUser] = useState({ name: 'Загрузка...', about: 'Загрузка...' });\n  const [cards, setCards] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userEmail, setUserEmail] = useState('');\n  const history = useHistory();\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n  function handleCardClick(card) {\n    setSelectedCard({ name: card.name, link: card.link });\n  }\n  function closeAllPopups() {\n    if (isEditAvatarPopupOpen) { handleEditAvatarClick() };\n    if (isEditProfilePopupOpen) { handleEditProfileClick() };\n    if (isAddPlacePopupOpen) { handleAddPlaceClick() };\n    if (registrationPopup.isOpen) {\n      if (!registrationPopup.openedWithError) {\n        history.push('/sign-in');\n      }\n      setRegistrationPopup({ ...registrationPopup, isOpen: false });\n    };\n    if (selectedCard.link !== '') { setSelectedCard({ name: '', link: '' }) };\n  }\n  function handleUpdateUser(userInformation) {\n    api.editProfile(userInformation)\n      .then(newUserInformation => {\n        setCurrentUser(newUserInformation);\n        closeAllPopups();\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n  function handleUpdateAvatar(avatar) {\n    api.updateAvatar(avatar)\n      .then(newUserInformation => {\n        setCurrentUser(newUserInformation);\n        closeAllPopups();\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.putLike(card._id, !isLiked)\n      .then(newCard => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n  function handleCardDelete(card) {\n    api.deleteCardFromServer(card._id)\n      .then(result => {\n        const newCards = cards.filter((c) => {\n          return c._id !== card._id;\n        })\n        setCards(newCards);\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n  function handleAddPlace(card) {\n    api.addNewCardToServer(card)\n      .then(card => {\n        setCards([card, ...cards]);\n        closeAllPopups();\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n  function handleLogin({ email, password }) {\n    authorisation.authorize({ 'password': password, 'email': email })\n      .then(response => {\n        if (response.token) {\n          localStorage.setItem('token', response.token);\n          getUserEmail(response.token)\n        }\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n  function handleRegister({ email, password }) {\n    authorisation.register({ 'password': password, 'email': email })\n      .then(() => {\n        setRegistrationPopup({ isOpen: true, openedWithError: false });\n      })\n      .catch(error => {\n        setRegistrationPopup({ isOpen: true, openedWithError: true });\n      })\n  }\n  function getUserEmail(token) {\n    authorisation.getEmail(token)\n      .then(response => {\n        setUserEmail(response.data.email);\n        setLoggedIn(true);\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n  function tokenCheck() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      getUserEmail(token);\n    }\n  }\n  function handleEnterButton() {\n    history.push('/sign-in');\n  }\n  function handleRegistrationButton() {\n    history.push('/sign-up');\n  }\n  function handleEscapeButton() {\n    localStorage.removeItem('token');\n    setLoggedIn(false);\n    setUserEmail('');\n    history.push('/sign-in');\n  }\n\n  useEffect(() => {\n    Promise.all([api.getUserInformation(), api.getCards()])\n      .then(([userInformation, cardsFromServer]) => {\n        setCurrentUser(userInformation);\n        setCards(cardsFromServer);\n        setIsLoading(false);\n        tokenCheck();\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }, []);\n  useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n    }\n  }, [loggedIn]);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className='page'>\n        {loggedIn && <Header email={userEmail} headerButton='Выйти' onClick={handleEscapeButton} />}\n        <Switch>\n          <ProtectedRoute exact path='/' loggedIn={loggedIn} component={Main} isLoading={isLoading} cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete} onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick} onCardClick={handleCardClick} />\n          <Route path='/sign-up'>\n            <Header headerButton='Войти' onClick={handleEnterButton} />\n            <Register onRegister={handleRegister} />\n          </Route>\n          <Route path='/sign-in'>\n            <Header headerButton='Регистрация' onClick={handleRegistrationButton} />\n            <Login onLogin={handleLogin} />\n          </Route>\n          <Route>\n            {loggedIn ? <Redirect to='/' /> : <Redirect to='/sign-in' />}\n          </Route>\n        </Switch>\n        <Footer />\n        <EditProfilePopup onUpdateUser={handleUpdateUser} isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} />\n        <EditAvatarPopup onUpdateAvatar={handleUpdateAvatar} isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} />\n        <AddPlacePopup onAddPlace={handleAddPlace} isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} />\n        <PopupWithForm name='view-card' title='Вы уверены?' inputValue=\"Да\" />\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n        <RegistrationPopup openedWithError={registrationPopup.openedWithError} isOpen={registrationPopup.isOpen} onClose={closeAllPopups} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}